{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48273620-0132f44a126025621a132d295';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page, perPage) => {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page,\n  });\n\n  const response = await axios.get(`${BASE_URL}?${params}`);\n  return response.data;\n};\n","export const renderGallery = (images, galleryEl) => {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-card\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p><strong>Likes:</strong> ${likes}</p>\n          <p><strong>Views:</strong> ${views}</p>\n          <p><strong>Comments:</strong> ${comments}</p>\n          <p><strong>Downloads:</strong> ${downloads}</p>\n        </div>\n      </li>`\n    )\n    .join('');\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\nloadMoreBtn.hidden = true;\n\nconst lightbox = new SimpleLightbox('.js-gallery a');\nlet query = '';\nlet page = 1;\nconst perPage = 15;\n\nconst showLoader = () => (loaderEl.hidden = false);\nconst hideLoader = () => (loaderEl.hidden = true);\n\nconst fetchAndRenderImages = async () => {\n  try {\n    showLoader();\n    const data = await fetchImages(query, page, perPage);\n    if (data.hits.length === 0 && page === 1) {\n      iziToast.warning({\n        title: 'No Results',\n        message: 'No images found. Try a different query.',\n        position: 'topRight',\n        timeout: 3000,\n      });\n      return;\n    }\n\n    renderGallery(data.hits, galleryEl);\n    lightbox.refresh();\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreBtn.hidden = true;\n      iziToast.info({\n        title: 'End of Results',\n        message: \"You've reached the end of search results.\",\n        position: 'topRight',\n        timeout: 3000,\n      });\n    } else {\n      loadMoreBtn.hidden = false;\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again.',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n};\n\nconst onSearch = async event => {\n  event.preventDefault();\n  galleryEl.innerHTML = '';\n  query = event.target.elements.user_query.value.trim();\n  page = 1;\n  loadMoreBtn.hidden = true;\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query!',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    return;\n  }\n\n  await fetchAndRenderImages();\n};\n\nconst onLoadMore = async () => {\n  page += 1;\n  await fetchAndRenderImages();\n\n  const { height: cardHeight } =\n    galleryEl.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nsearchFormEl.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","params","axios","renderGallery","images","galleryEl","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchFormEl","loaderEl","loadMoreBtn","lightbox","SimpleLightbox","showLoader","hideLoader","fetchAndRenderImages","data","iziToast","error","onSearch","event","onLoadMore","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAc,MAAOC,EAAOC,EAAMC,IAAY,CACzD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUE,EACV,KAAAD,CACJ,CAAG,EAGD,OADiB,MAAMG,EAAM,IAAI,GAAGN,CAAQ,IAAIK,CAAM,EAAE,GACxC,IAClB,EClBaE,EAAgB,CAACC,EAAQC,IAAc,CAClD,MAAMC,EAASF,EACZ,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,mBAEOL,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,uCAGTC,CAAK;AAAA,uCACLC,CAAK;AAAA,0CACFC,CAAQ;AAAA,2CACPC,CAAS;AAAA;AAAA,YAG/C,EACA,KAAK,EAAE,EACVR,EAAU,mBAAmB,YAAaC,CAAM,CAClD,ECnBMQ,EAAe,SAAS,cAAc,iBAAiB,EACvDT,EAAY,SAAS,cAAc,aAAa,EAChDU,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAc,SAAS,cAAc,eAAe,EAC1DA,EAAY,OAAS,GAErB,MAAMC,EAAW,IAAIC,EAAe,eAAe,EACnD,IAAIpB,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GAEVmB,EAAa,IAAOJ,EAAS,OAAS,GACtCK,EAAa,IAAOL,EAAS,OAAS,GAEtCM,EAAuB,SAAY,CACvC,GAAI,CACFF,IACA,MAAMG,EAAO,MAAMzB,EAAYC,EAAOC,EAAMC,CAAO,EACnD,GAAIsB,EAAK,KAAK,SAAW,GAAKvB,IAAS,EAAG,CACxCwB,EAAS,QAAQ,CACf,MAAO,aACP,QAAS,0CACT,SAAU,WACV,QAAS,GACjB,CAAO,EACD,MACD,CAEDpB,EAAcmB,EAAK,KAAMjB,CAAS,EAClCY,EAAS,QAAO,EAEZlB,EAAOC,GAAWsB,EAAK,WACzBN,EAAY,OAAS,GACrBO,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4CACT,SAAU,WACV,QAAS,GACjB,CAAO,GAEDP,EAAY,OAAS,EAExB,OAAQQ,EAAO,CACdD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0CACT,SAAU,WACV,QAAS,GACf,CAAK,EACD,QAAQ,MAAMC,CAAK,CACvB,QAAY,CACRJ,GACD,CACH,EAEMK,EAAW,MAAMC,GAAS,CAO9B,GANAA,EAAM,eAAc,EACpBrB,EAAU,UAAY,GACtBP,EAAQ4B,EAAM,OAAO,SAAS,WAAW,MAAM,OAC/C3B,EAAO,EACPiB,EAAY,OAAS,GAEjB,CAAClB,EAAO,CACVyB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+BACT,SAAU,WACV,QAAS,GACf,CAAK,EACD,MACD,CAED,MAAMF,EAAoB,CAC5B,EAEMM,EAAa,SAAY,CAC7B5B,GAAQ,EACR,MAAMsB,EAAoB,EAE1B,KAAM,CAAE,OAAQO,CAAY,EAC1BvB,EAAU,kBAAkB,wBAC9B,OAAO,SAAS,CACd,IAAKuB,EAAa,EAClB,SAAU,QACd,CAAG,CACH,EAEAd,EAAa,iBAAiB,SAAUW,CAAQ,EAChDT,EAAY,iBAAiB,QAASW,CAAU"}